{"version":3,"sources":["webpack:///./src/components/bookPage/BookInfoPage/bookInfoPage.jsx"],"names":["BookInfoPage","props","state","book","getBook","match","params","id","bookService","getById","result","setState","authors","forEach","author","push","genres","genre","title","localStorageHelper","getRole","urlHelper","getUrlWithParameter","routing","addBookPage","url","edit","join","pagesCount","publishingYear","price","getId","description","rating","image","comments","React","PureComponent","PropTypes","shape","path","string","isRequired","isExact","bool"],"mappings":"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","file":"main.8a611c62c0847f195df7.hot-update.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport ShoppingCartCounter from 'components/common/ShoppingCartCounter/shoppingCartCounter';\r\nimport Icon from 'components/common/Icon/icon';\r\nimport FavoriteButton from 'components/common/FavoriteButton/favoriteButton';\r\nimport CommentsSection from 'components/bookPage/CommentsSection/commentsSection';\r\nimport RatingPanel from 'components/bookPage/RatingPanel/ratingPanel';\r\nimport bookService from 'services/bookService';\r\nimport urlHelper from 'helpers/urlHelper';\r\nimport localStorageHelper from 'helpers/localStorageHelper';\r\nimport routing from 'constants/routing';\r\n\r\nimport edit from 'styles/icons/edit.svg';\r\nimport './bookInfoPage.scss';\r\n\r\nexport default class BookInfoPage extends React.PureComponent {\r\n    static propTypes = {\r\n        match: PropTypes.shape({\r\n            path: PropTypes.string.isRequired,\r\n            url: PropTypes.string.isRequired,\r\n            isExact: PropTypes.bool.isRequired,\r\n            params: PropTypes.shape({\r\n                id: PropTypes.string.isRequired\r\n            }).isRequired\r\n        }).isRequired\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { book: null };\r\n        this.getBook(this.props.match.params.id);\r\n    }\r\n\r\n    async getBook(id) {\r\n        const result = await bookService.getById(id);\r\n        this.setState({ book: result });\r\n    }\r\n\r\n    render() {\r\n        const { book } = this.state;\r\n\r\n        if (!book) {\r\n            return null;\r\n        }\r\n\r\n        const authors = [];\r\n\r\n        if (book.authors) {\r\n            book.authors.forEach((author) => {\r\n                authors.push(author);\r\n            });\r\n        }\r\n\r\n        const genres = [];\r\n\r\n        if (book.genres) {\r\n            book.genres.forEach((genre) => {\r\n                genres.push(genre);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <section className=\"book-details-page\">\r\n                    <div className=\"book-details-page__content\">\r\n                        <h1 className=\"book-details-page__title\">{book.title}\r\n                            {\r\n                                localStorageHelper.getRole() === 'admin'\r\n                                    && (\r\n                                        <Link to={urlHelper.getUrlWithParameter(routing.addBookPage.url, /:id/, this.props.match.params.id)}>\r\n                                            <button type=\"button\" className=\"book-details-page__button\">\r\n                                                <Icon icon={edit} iconClassName=\"book-details-page__icon\" />\r\n                                            </button>\r\n                                        </Link>\r\n                                    )\r\n                            }\r\n                        </h1>\r\n                        <div className=\"book-details-page__authors\">{authors.join(', ')}</div>\r\n                        <div className=\"book-details-page__genres\">{genres.join(', ')}</div>\r\n                        <div className=\"book-details-page__pages\">Pages: {book.pagesCount}</div>\r\n                        <div className=\"book-details-page__publishing-year\">Publishing year: {book.publishingYear}</div>\r\n                        <div className=\"book-details-page__price\">Price: {book.price}</div>\r\n                        {\r\n                            localStorageHelper.getId()!='' && localStorageHelper.getId() (\r\n                                <>\r\n                                    <FavoriteButton book={book} className=\"book-details-page__button\" />\r\n                                    <ShoppingCartCounter bookId={book.id} className=\"book-details-page__icon\" />\r\n                                </>\r\n                            )\r\n                        }\r\n                        <p className=\"book-details-page__description\">{book.description}</p>\r\n                        <RatingPanel rating={book.rating} bookId={book.id} />\r\n                    </div>\r\n                    <img alt=\"Item_image\" className=\"book-details-page__image\" src={book.image} />\r\n                </section>\r\n                {\r\n                    localStorageHelper.getId()\r\n                        && (\r\n                            <CommentsSection bookId={book.id} comments={book.comments} />\r\n                        )\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}