{"version":3,"sources":["webpack:///./src/components/orderPage/BooksSection/booksSection.scss","webpack:///./src/components/orderPage/BooksSection/booksSection.jsx","webpack:///./src/components/orderPage/BooksSection/booksSection.scss?f644"],"names":["BooksSection","props","localStorageHelper","getUserItems","getId","books","result","element","bookService","getById","bookId","bookInfo","amount","setState","sum","state","price","push","components","forEach","authors","author","genres","genre","title","join","pagesCount","publishingYear","id","image","order","userId","orderService","add","alert","deleteUsersCart","history","renderBooks","parseFloat","his","toFixed","saveOrder","React","Component","PropTypes","shape","length","number","isRequired","action","string","location","pathname","search","hash","key","func"],"mappings":"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","file":"main.b68ce5e6b9180be65cec.hot-update.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".books-section {\\n  margin: 0 auto; }\\n\\n.books-section-list-item {\\n  display: flex;\\n  justify-content: space-between;\\n  min-height: 0;\\n  margin: 20px;\\n  padding: 10px;\\n  font-family: 'Lucida Sans', sans-serif;\\n  box-shadow: 0 0 10px 5px #dddddd; }\\n\\n.books-section-list-item__title {\\n  font-size: 26px; }\\n\\n.books-section-list-item__authors,\\n.books-section-list-item__genres,\\n.books-section-list-item__publishing-year,\\n.books-section-list-item__pages,\\n.books-section-list-item__amount {\\n  padding: 5px 0;\\n  font-size: 16px; }\\n\\n.books-section-list-item__description {\\n  width: 90%;\\n  padding: 20px 0;\\n  font-size: 14px; }\\n\\n.books-section-list-item__image {\\n  width: auto;\\n  height: 150px; }\\n\\n.books-section__total-price {\\n  font-size: 24px;\\n  font-family: 'Lucida Sans', sans-serif; }\\n\\n.books-section__save-button {\\n  width: 30%;\\n  margin: 10px auto;\\n  padding: 5px;\\n  color: #ffffff;\\n  font-size: 20px;\\n  font-family: 'Lucida Sans', sans-serif;\\n  background-color: #106cc8;\\n  border: none; }\\n\\n.books-section-list-item__buttons {\\n  display: flex; }\\n\\n.books-section-list-item__details-button,\\n.books-section-list-item__favorite-button {\\n  margin: 5px;\\n  padding: 10px;\\n  color: #ffffff;\\n  text-transform: uppercase;\\n  background-color: #106cc8;\\n  border: none; }\\n\", \"\"]);\n\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport OpenDetailsPageButton from 'components/common/OpenDetailsPageButton/openDetailsPageButton';\r\nimport FavoriteButton from 'components/common/FavoriteButton/favoriteButton';\r\nimport localStorageHelper from 'helpers/localStorageHelper';\r\nimport bookService from 'services/bookService';\r\nimport orderService from 'services/orderService';\r\n\r\nimport './booksSection.scss';\r\n\r\nexport default class BooksSection extends React.Component {\r\n    static propTypes = {\r\n        history: PropTypes.shape({\r\n            length: PropTypes.number.isRequired,\r\n            action: PropTypes.string.isRequired,\r\n            location: PropTypes.shape({\r\n                pathname: PropTypes.string.isRequired,\r\n                search: PropTypes.string.isRequired,\r\n                hash: PropTypes.string.isRequired,\r\n                key: PropTypes.string.isRequired\r\n            }),\r\n            push: PropTypes.func.isRequired\r\n        }).isRequired\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            books: [],\r\n            sum: 0\r\n        };\r\n    }\r\n\r\n\r\n    componentDidMount = async () => {\r\n        const { books } = localStorageHelper.getUserItems(localStorageHelper.getId());\r\n        const result = [];\r\n\r\n        for (const element of books) {\r\n            const bookInfo = await bookService.getById(element.bookId);\r\n            bookInfo.amount = element.amount;\r\n\r\n            this.setState({\r\n                sum: this.state.sum + bookInfo.price * bookInfo.amount\r\n            });\r\n            result.push(bookInfo);\r\n        }\r\n\r\n        this.setState({ books: result });\r\n    }\r\n\r\n    renderBooks = () => {\r\n        const components = [];\r\n        const { books } = this.state;\r\n\r\n        books.forEach((element) => {\r\n            const authors = [];\r\n            element.authors.forEach((author) => {\r\n                authors.push(author);\r\n            });\r\n\r\n            const genres = [];\r\n            element.genres.forEach((genre) => {\r\n                genres.push(genre);\r\n            });\r\n\r\n            components.push(\r\n                <div className=\"books-section-list-item\">\r\n                    <div>\r\n                        <div className=\"books-section-list-item__title\">{element.title}</div>\r\n                        <div className=\"books-section-list-item__authors\">Authors: {authors.join(', ')}</div>\r\n                        <div className=\"books-section-list-item__genres\">Genres: {genres.join(', ')}</div>\r\n                        <div className=\"books-section-list-item__pages\">Pages: {element.pagesCount}</div>\r\n                        <div className=\"books-section-list-item__publishing-year\">Publishing year: {element.publishingYear}</div>\r\n                        <div className=\"books-section-list-item__price\">Price: {element.price}</div>\r\n                        <div className=\"books-section-list-item__amount\">Amount: {element.amount}</div>\r\n                        <div className=\"books-section-list-item__buttons\">\r\n                            <OpenDetailsPageButton bookId={element.id} className=\"books-section-list-item__details-button\" />\r\n                            <FavoriteButton book={element} className=\"books-section-list-item__favorite-button\" />\r\n                        </div>\r\n                    </div>\r\n                    <img alt=\"Item_image\" className=\"books-section-list-item__image\" src={element.image} />\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return components;\r\n    }\r\n\r\n    saveOrder = async () => {\r\n        const order = this.state;\r\n        order.userId = localStorageHelper.getId();\r\n        const result = await orderService.add(order);\r\n        if (result) {\r\n            alert('We received your order, the manager will call you as soon as possible');\r\n            localStorageHelper.deleteUsersCart(localStorageHelper.getId());\r\n            this.props.history.push('/');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"books-section\">\r\n                {this.renderBooks()}\r\n                <h2 className=\"books-section__total-price\">Total price: {parseFloat(his.state.sum.toFixed(2))}</h2>\r\n                <button className=\"books-section__save-button\" type=\"button\" onClick={this.saveOrder}>Pay for order</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./booksSection.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./booksSection.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./booksSection.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}