{"version":3,"sources":["webpack:///./src/components/bookPage/BookInfoPage/bookInfoPage.jsx"],"names":["BookInfoPage","props","state","book","isLoading","getBook","match","params","id","bookService","getById","result","setState","preloader","title","localStorageHelper","getRole","urlHelper","getUrlWithParameter","routing","addBookPage","url","edit","authors","join","genres","pagesCount","publishingYear","price","getId","undefined","description","rating","image","comments","React","PureComponent","PropTypes","shape","path","string","isRequired","isExact","bool"],"mappings":"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","file":"main.23f89b8989bd9ac13dd0.hot-update.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport ShoppingCartCounter from 'components/common/ShoppingCartCounter/shoppingCartCounter';\r\nimport Icon from 'components/common/Icon/icon';\r\nimport FavoriteButton from 'components/common/FavoriteButton/favoriteButton';\r\nimport CommentsSection from 'components/bookPage/CommentsSection/commentsSection';\r\nimport RatingPanel from 'components/bookPage/RatingPanel/ratingPanel';\r\nimport bookService from 'services/bookService';\r\nimport urlHelper from 'helpers/urlHelper';\r\nimport localStorageHelper from 'helpers/localStorageHelper';\r\nimport routing from 'constants/routing';\r\n\r\nimport preloader from 'styles/icons/preloader.svg';\r\nimport edit from 'styles/icons/edit.svg';\r\nimport './bookInfoPage.scss';\r\n\r\nexport default class BookInfoPage extends React.PureComponent {\r\n    static propTypes = {\r\n        match: PropTypes.shape({\r\n            path: PropTypes.string.isRequired,\r\n            url: PropTypes.string.isRequired,\r\n            isExact: PropTypes.bool.isRequired,\r\n            params: PropTypes.shape({\r\n                id: PropTypes.string.isRequired\r\n            }).isRequired\r\n        }).isRequired\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { book: null, isLoading: true };\r\n        this.getBook(this.props.match.params.id);\r\n    }\r\n\r\n    async getBook(id) {\r\n        const result = await bookService.getById(id);\r\n        this.setState({ book: result, isLoading: false });\r\n    }\r\n\r\n    render() {\r\n        const { book } = this.state;\r\n\r\n        if (!book) {\r\n            return null;\r\n        }\r\n\r\n        if (this.state.isLoading) {\r\n            return (\r\n                <div className=\"book-details-page__preloader\">\r\n                    <Icon iconClassName=\"book-details-page__preloader-icon\" icon={preloader} />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <section className=\"book-details-page\">\r\n                    <div className=\"book-details-page__content\">\r\n                        <h1 className=\"book-details-page__title\">{book.title}\r\n                            {\r\n                                localStorageHelper.getRole() === 'admin'\r\n                                    && (\r\n                                        <Link to={urlHelper.getUrlWithParameter(routing.addBookPage.url, /:id/, this.props.match.params.id)}>\r\n                                            <button type=\"button\" className=\"book-details-page__button\">\r\n                                                <Icon icon={edit} iconClassName=\"book-details-page__icon\" />\r\n                                            </button>\r\n                                        </Link>\r\n                                    )\r\n                            }\r\n                        </h1>\r\n                        <div className=\"book-details-page__authors\">{authors.join(', ')}</div>\r\n                        <div className=\"book-details-page__genres\">{genres.join(', ')}</div>\r\n                        <div className=\"book-details-page__pages\">Pages: {book.pagesCount}</div>\r\n                        <div className=\"book-details-page__publishing-year\">Publishing year: {book.publishingYear}</div>\r\n                        <div className=\"book-details-page__price\">Price: {book.price}</div>\r\n                        {\r\n                            localStorageHelper.getId() !== '' && localStorageHelper.getId() !== undefined && localStorageHelper.getRole() === 'user' && (\r\n                                <>\r\n                                    <FavoriteButton book={book} className=\"book-details-page__button\" />\r\n                                    <ShoppingCartCounter bookId={book.id} className=\"book-details-page__icon\" />\r\n                                </>\r\n                            )\r\n                        }\r\n                        <p className=\"book-details-page__description\">{book.description}</p>\r\n                        <RatingPanel rating={book.rating} bookId={book.id} />\r\n                    </div>\r\n                    <img alt=\"Item_image\" className=\"book-details-page__image\" src={book.image} />\r\n                </section>\r\n                {\r\n                    localStorageHelper.getId()\r\n                        && (\r\n                            <CommentsSection bookId={book.id} comments={book.comments} />\r\n                        )\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}