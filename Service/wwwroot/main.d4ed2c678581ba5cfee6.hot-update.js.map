{"version":3,"sources":["webpack:///./src/components/addBookPage/AddBookPage/addBookPage.jsx"],"names":["AddBookPage","getAllAuthors","setState","props","match","params","id","bookService","getById","book","image","title","publishingYear","pagesCount","price","description","count","genres","authors","isLoading","serviceWrapper","callService","authorService","get","result","allAuthors","event","target","value","author","state","push","splice","indexOf","genre","e","preventDefault","validator","allValid","bookData","add","errorFieldRef","update","redirectHelper","redirectToHomePage","history","showMessages","forceUpdate","messages","message","bookValidationConfig","fieldName","rule","SimpleReactValidator","React","createRef","localStorageHelper","getRole","save","changeImage","deleteImage","changeDescription","changeTitle","changePrice","changePagesCount","changeCount","changePublishingYear","renderValidationResult","addGenre","deleteGenre","addAuthor","deleteAuthor","Component","PropTypes","shape","length","number","isRequired","action","string","location","pathname","search","hash","key","func","path","url","isExact","bool"],"mappings":"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","file":"main.d4ed2c678581ba5cfee6.hot-update.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\n\r\n\r\nimport Input from 'components/common/Input/input';\r\nimport bookService from 'services/bookService';\r\nimport authorService from 'services/authorService';\r\nimport serviceWrapper from 'helpers/serviceWrapper';\r\nimport redirectHelper from 'helpers/redirectHelper';\r\nimport AddAuthorBlock from 'components/addBookPage/AddAuthorBlock/addAuthorBlock';\r\nimport AddGenreBlock from 'components/addBookPage/AddGenreBlock/addGenreBlock';\r\nimport PhotoSelector from 'components/common/PhotoSelector/photoSelector';\r\nimport bookValidationConfig from 'validationConfigs/bookValidationConfig';\r\n\r\nimport './addBookPage.scss';\r\nimport localStorageHelper from 'helpers/localStorageHelper';\r\n\r\nexport default class AddBookPage extends React.Component {\r\n    static propTypes = {\r\n        history: PropTypes.shape({\r\n            length: PropTypes.number.isRequired,\r\n            action: PropTypes.string.isRequired,\r\n            location: PropTypes.shape({\r\n                pathname: PropTypes.string.isRequired,\r\n                search: PropTypes.string.isRequired,\r\n                hash: PropTypes.string.isRequired,\r\n                key: PropTypes.string.isRequired\r\n            }),\r\n            push: PropTypes.func.isRequired\r\n        }).isRequired,\r\n        match: PropTypes.shape({\r\n            path: PropTypes.string.isRequired,\r\n            url: PropTypes.string.isRequired,\r\n            isExact: PropTypes.bool.isRequired,\r\n            params: PropTypes.shape({\r\n                id: PropTypes.string.isRequired\r\n            }).isRequired\r\n        }).isRequired\r\n    }\r\n\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.validator = new SimpleReactValidator();\r\n        this.errorFieldRef = React.createRef();\r\n        this.state = {\r\n            id: 0,\r\n            image: '',\r\n            title: '',\r\n            publishingYear: '',\r\n            pagesCount: '',\r\n            price: '',\r\n            description: '',\r\n            count: '',\r\n            genres: [],\r\n            authors: [],\r\n            allAuthors: [],\r\n            isLoading: true\r\n        };\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        this.getAllAuthors();\r\n\r\n        this.setState;\r\n        if (this.props.match.params.id !== '0') {\r\n            const book = await bookService.getById(this.props.match.params.id);\r\n            if (book) {\r\n                this.setState({\r\n                    id: book.id,\r\n                    image: book.image,\r\n                    title: book.title,\r\n                    publishingYear: book.publishingYear,\r\n                    pagesCount: book.pagesCount,\r\n                    price: book.price,\r\n                    description: book.description,\r\n                    count: book.count,\r\n                    genres: book.genres,\r\n                    authors: book.authors,\r\n                    setState: false\r\n                });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                isLoading: false\r\n            });\r\n        }\r\n    }\r\n\r\n    getAllAuthors = async () => {\r\n        const result = await serviceWrapper.callService(authorService.get, null, null);\r\n        if (result) {\r\n            this.setState({ allAuthors: result });\r\n        }\r\n    }\r\n\r\n    deleteImage = () => {\r\n        this.setState({ image: '' });\r\n    }\r\n\r\n    changeTitle = (event) => {\r\n        this.setState({\r\n            title: event.target.value\r\n        });\r\n    }\r\n\r\n    changePrice = (event) => {\r\n        this.setState({\r\n            price: event.target.value\r\n        });\r\n    }\r\n\r\n    changePagesCount = (event) => {\r\n        this.setState({\r\n            pagesCount: event.target.value\r\n        });\r\n    }\r\n\r\n    changeDescription = (event) => {\r\n        this.setState({\r\n            description: event.target.value\r\n        });\r\n    }\r\n\r\n    changePublishingYear = (event) => {\r\n        this.setState({\r\n            publishingYear: event.target.value\r\n        });\r\n    }\r\n\r\n    changeCount = (event) => {\r\n        this.setState({\r\n            count: event.target.value\r\n        });\r\n    }\r\n\r\n    changeImage = (image) => {\r\n        this.setState({ image });\r\n    }\r\n\r\n    addAuthor = (author) => {\r\n        const { authors } = this.state;\r\n        authors.push(author);\r\n        this.setState({ authors });\r\n    }\r\n\r\n    deleteAuthor = (author) => {\r\n        const { authors } = this.state;\r\n        authors.splice(authors.indexOf(author), 1);\r\n        this.setState({ authors });\r\n    }\r\n\r\n    deleteGenre = (genre) => {\r\n        const { genres } = this.state;\r\n        genres.splice(genres.indexOf(genre), 1);\r\n        this.setState({ genres });\r\n    }\r\n\r\n    addGenre = (genre) => {\r\n        const { genres } = this.state;\r\n        genres.push(genre);\r\n        this.setState({ genres });\r\n    }\r\n\r\n    save = async (e) => {\r\n        e.preventDefault();\r\n        if (this.validator.allValid()) {\r\n            const bookData = { ...this.state };\r\n            let result;\r\n\r\n            if (this.state.id === 0) {\r\n                result = await serviceWrapper.callService(bookService.add, bookData, this.errorFieldRef);\r\n            } else {\r\n                result = await serviceWrapper.callService(bookService.update, bookData, this.errorFieldRef);\r\n            }\r\n\r\n            redirectHelper.redirectToHomePage(this.props.history);\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n        }\r\n    }\r\n\r\n    renderValidationResult = () => {\r\n        const messages = [\r\n            this.validator.message(bookValidationConfig.title.fieldName, this.state.title, bookValidationConfig.title.rule),\r\n            this.validator.message(bookValidationConfig.price.fieldName, this.state.price, bookValidationConfig.price.rule),\r\n            this.validator.message(bookValidationConfig.image.fieldName, this.state.image, bookValidationConfig.image.rule),\r\n            this.validator.message(bookValidationConfig.publishingYear.fieldName, this.state.publishingYear, bookValidationConfig.publishingYear.rule),\r\n            this.validator.message(bookValidationConfig.description.fieldName, this.state.description, bookValidationConfig.description.rule),\r\n            this.validator.message(bookValidationConfig.pagesCount.fieldName, this.state.pagesCount, bookValidationConfig.pagesCount.rule),\r\n            this.validator.message(bookValidationConfig.count.fieldName, this.state.count, bookValidationConfig.count.rule)\r\n        ];\r\n\r\n        return (\r\n            <div className=\"add-book-page__validation-result\" ref={this.errorFieldRef}>\r\n                {messages}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (localStorageHelper.getRole() !== 'admin') {\r\n            return <h1 className=\"add-book-page__title\">You don't have permission to do it</h1>;\r\n        }\r\n        if (this.state.isLoading) {\r\n            return <h1 className=\"add-book-page__title\">You don't have permission to do it</h1>;\r\n        }\r\n        return (\r\n            <section className=\"add-book-page\">\r\n                <h1 className=\"add-book-page__title\">Add or update book</h1>\r\n                <form className=\"add-book-page__form\" onSubmit={this.save}>\r\n                    <div className=\"add-book-page__image-block\">\r\n                        <img\r\n                            className=\"add-book-page__book-image\"\r\n                            alt=\"book\"\r\n                            src={this.state.image}\r\n                        />\r\n                        <PhotoSelector onChange={this.changeImage} />\r\n                        <button className=\"add-book-page__form-button\" type=\"button\" onClick={this.deleteImage}>\r\n                            Delete photo\r\n                        </button>\r\n                        <Input\r\n                            name=\"description\"\r\n                            type=\"text\"\r\n                            label=\"Description:\"\r\n                            onChange={this.changeDescription}\r\n                            value={this.state.description}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <Input name=\"title\" type=\"text\" label=\"Title:\" onChange={this.changeTitle} value={this.state.title} />\r\n                        <Input name=\"price\" type=\"text\" label=\"Price:\" onChange={this.changePrice} value={this.state.price} />\r\n                        <Input name=\"pages\" type=\"text\" label=\"Pages:\" onChange={this.changePagesCount} value={this.state.pagesCount} />\r\n                        <Input name=\"count\" type=\"text\" label=\"Count:\" onChange={this.changeCount} value={this.state.count} />\r\n                        <Input name=\"publishingYear\" type=\"text\" label=\"Publishing Year:\" onChange={this.changePublishingYear} value={this.state.publishingYear} />\r\n                        {\r\n                            this.renderValidationResult()\r\n                        }\r\n                    </div>\r\n                    <div className=\"add-book-page__author-genres\">\r\n                        <AddGenreBlock\r\n                            genres={this.state.genres}\r\n                            addGenre={this.addGenre}\r\n                            deleteGenre={this.deleteGenre}\r\n                        />\r\n                        <AddAuthorBlock\r\n                            authors={this.state.authors}\r\n                            allAuthors={this.state.allAuthors}\r\n                            addAuthor={this.addAuthor}\r\n                            deleteAuthor={this.deleteAuthor}\r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"add-book-page__form-button\">Add book</button>\r\n                </form>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}